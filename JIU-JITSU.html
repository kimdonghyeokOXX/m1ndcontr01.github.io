<!DOCTYPE html>
<html lang="ko" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <link href="main.css" rel="stylesheet">
    <link rel="icon" href="logo.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
    <title>MY LIFE</title>
    <style>
        body {
            text-align: center;
            background: linear-gradient(135deg, #ff6b6b, #f7d94c);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Noto Sans', sans-serif;
        }

        /* 버튼 스타일 */
        #reset {
            position: absolute; /* 절대 위치로 변경 */
    top: 20px; /* 상단에서 20px 떨어진 위치 */
    right: 20px; /* 오른쪽에서 20px 떨어진 위치 */
    background-color: white;
    color: black;
    padding: 10px 15px;
    border: none;
    border-radius: 5px;
    text-decoration: none;
    font-size: 16px;
    transition: background-color 0.3s;
    z-index: 10; /* 다른 요소 위에 표시되도록 z-index 추가 */
        }

        #reset:hover {
            background-color: #0056b3;
        }

        #chessboard {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-template-rows: repeat(8, 60px);
            margin-top: 20px;
        }

        .cell {
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            cursor: pointer;
        }

        .cell:nth-child(odd) {
            background-color: #0c0c0c;
        }

        .cell:nth-child(even) {
            background-color: #414141;
        }

        .cell.selected {
            background-color: yellow;
        }
    </style>
</head>
<body>

    <button id="reset">RESET</button>

    <div id="chessboard"></div>

    <script>
        const chessboard = document.getElementById('chessboard');
        const resetButton = document.getElementById('reset');
        let selectedCell = null;
        let isWhiteTurn = true;

        // 체스 기물 초기화
        const initialBoard = [
            ['♖', '♘', '♗', '♕', '♔', '♗', '♘', '♖'], // 백 기물
            ['♙', '♙', '♙', '♙', '♙', '♙', '♙', '♙'], // 백 폰
            ['', '', '', '', '', '', '', ''], // 빈 칸
            ['', '', '', '', '', '', '', ''], // 빈 칸
            ['', '', '', '', '', '', '', ''], // 빈 칸
            ['', '', '', '', '', '', '', ''], // 빈 칸
            ['♟', '♟', '♟', '♟', '♟', '♟', '♟', '♟'], // 흑 폰
            ['♜', '♞', '♝', '♛', '♚', '♝', '♞', '♜']  // 흑 기물
        ];

        // 체스판 초기화
        function initBoard() {
            chessboard.innerHTML = '';
            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = r;
                    cell.dataset.col = c;
                    cell.textContent = initialBoard[r][c];
                    cell.addEventListener('click', selectCell);
                    chessboard.appendChild(cell);
                }
            }
        }

        // 셀 선택 처리
        function selectCell(event) {
            const cell = event.target;
            if (selectedCell) {
                // 이미 선택된 셀이 있을 경우
                if (cell !== selectedCell) {
                    // 기물 이동 로직
                    movePiece(selectedCell, cell);
                    selectedCell.classList.remove('selected');
                    selectedCell = null;
                    isWhiteTurn = !isWhiteTurn; // 턴 변경
                    if (!isWhiteTurn) {
                        setTimeout(randomMove, 1000); // 상대방의 랜덤 이동
                    }
                }
            } else {
                // 셀 선택
                selectedCell = cell;
                selectedCell.classList.add('selected');
            }
        }

        // 기물 이동 처리
        function movePiece(fromCell, toCell) {
            const fromRow = parseInt(fromCell.dataset.row);
            const fromCol = parseInt(fromCell.dataset.col);
            const toRow = parseInt(toCell.dataset.row);
            const toCol = parseInt(toCell.dataset.col);

            // 이동 가능 여부 체크 (기본적인 규칙만 적용)
            const piece = fromCell.textContent;
            if (isValidMove(piece, fromRow, fromCol, toRow, toCol)) {
                toCell.textContent = piece;
                fromCell.textContent = '';
            }
        }

        // 기물 이동 유효성 검사 (기본적인 규칙)
        function isValidMove(piece, fromRow, fromCol, toRow, toCol) {
            // 기물의 이동 규칙을 간단히 체크
            const rowDiff = Math.abs(toRow - fromRow);
            const colDiff = Math.abs(toCol - fromCol);

            switch (piece) {
                case '♙': // 백 폰
                    return (rowDiff === 1 && colDiff === 0 && toRow > fromRow) || (rowDiff === 1 && colDiff === 1 && toRow > fromRow && initialBoard[toRow][toCol] !== '');
                case '♟': // 흑 폰
                    return (rowDiff === 1 && colDiff === 0 && toRow < fromRow) || (rowDiff === 1 && colDiff === 1 && toRow < fromRow && initialBoard[toRow][toCol] !== '');
                case '♖': case '♜': // 룩
                    return (rowDiff === 0 || colDiff === 0) && (rowDiff === 0 || colDiff === 0);
                case '♘': case '♞': // 나이트
                    return (rowDiff === 2 && colDiff === 1) || (rowDiff === 1 && colDiff === 2);
                case '♗': case '♝': // 비숍
                    return rowDiff === colDiff;
                case '♕': case '♛': // 퀸
                    return (rowDiff === colDiff || rowDiff === 0 || colDiff === 0);
                case '♔': case '♚': // 킹
                    return (rowDiff <= 1 && colDiff <= 1);
                default:
                    return false;
            }
        }

        // 랜덤으로 상대방 기물 이동
        function randomMove() {
            const blackPieces = [];
            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    const cell = chessboard.children[r * 8 + c];
                    if (cell.textContent && cell.textContent.charCodeAt(0) >= '♟'.charCodeAt(0)) {
                        blackPieces.push(cell);
                    }
                }
            }

            if (blackPieces.length > 0) {
                const randomPiece = blackPieces[Math.floor(Math.random() * blackPieces.length)];
                const possibleMoves = getPossibleMoves(randomPiece);
                if (possibleMoves.length > 0) {
                    const randomMove = possibleMoves[Math.floor(Math.random() * possibleMoves.length)];
                    movePiece(randomPiece, randomMove);
                }
            }
            isWhiteTurn = true; // 턴 변경
        }

        // 랜덤으로 선택된 기물의 가능한 이동 위치 반환
        function getPossibleMoves(pieceCell) {
            const row = parseInt(pieceCell.dataset.row);
            const col = parseInt(pieceCell.dataset.col);
            const piece = pieceCell.textContent;
            const possibleMoves = [];

            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    const targetCell = chessboard.children[r * 8 + c];
                    if (isValidMove(piece, row, col, r, c)) {
                        possibleMoves.push(targetCell);
                    }
                }
            }
            return possibleMoves;
        }

        // 리셋 버튼 클릭 시 보드 초기화
        resetButton.addEventListener('click', initBoard);

        // 게임 초기화
        initBoard();
    </script>
</body>
</html>
